!function(e){function t(){e(function(){e('a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=e(this.hash);if(t=t.length?t:e("[name="+this.hash.slice(1)+"]"),t.length)return e("html, body").animate({scrollTop:t.offset().top},1e3),!1}})})}function n(){var t=e(window),n=e(".mpfadein"),o=t.height(),i=t.scrollTop()+200,a=i+o-150;e.each(n,function(){var t=e(this),n=t.outerHeight(),o=t.offset().top;o+n>=i&&o<=a?t.addClass("mpfadein--active"):t.removeClass("mpfadein--active")})}function o(e){document.title=e?e+" | Metacin - Beyond Medicin":"Metacin - Beyond Medicine"}var i=(new ScrollMagic.Controller,{methods:{preload:function(e,t){var n,o,i=0;for(n=0,o=e.length;n<o;n++)!function(n,o){n.onload=function(){++i==e.length&&t&&t()},n.onerror=function(){},n.onabort=function(){},n.src=o}(new Image,e[n])}},computed:{isLoading:function(){return this.$store.state.loading}}});Vue.prototype.$http=axios;const a=new Vuex.Store({state:{loading:!0},mutations:{loadingOn:function(e){e.loading=!0,document.body.classList.add("no-scroll")},loadingOff:function(e){e.loading=!1,document.body.classList.remove("no-scroll")}}});var s=Vue.extend({template:"#featuredTemplate",store:a,mixins:[i],data:function(){return{menu:!1,playing:!1,feat:[]}},methods:{playAudio:function(){e(".mpcard--music").addClass("hover"),this.playing?(e(".mpaudio__player").get(0).pause(),e(".mpcard__back__inner > i").removeClass("fa-pause").addClass("fa-play-circle")):(e(".mpaudio__player").get(0).play(),e(".mpcard__back__inner > i").removeClass("fa-play-circle").addClass("fa-pause")),this.playing=!this.playing},isLoading:function(){return this.$store.state.loading}},computed:{},mounted:function(){this.$nextTick(function(){o("Welcome"),a.commit("loadingOn");var i=["http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/gallery-8.png","http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/yeaman.png","http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/pexels-2.jpg","http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/neurons.jpg","http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/pexels-1.jpg"],s=this;this.preload(i,function(){a.commit("loadingOff"),e(".header__menu-item").click(function(){s.menu?(e("body").removeClass("show-nav"),e("body").addClass("hide-nav"),e(".header__menu-item").html("M&#9776;")):(e("body").addClass("show-nav"),e("body").removeClass("hide-nav"),e(".header__menu-item").html("&#x2715;")),s.menu=!s.menu}),e(".header-nav__a").click(function(){e("body").removeClass("show-nav"),e("body").addClass("hide-nav"),e(".header__menu-item").html("M&#9776;"),s.menu=!s.menu}),e("html, body").scrollTop(0);var o=e(window);t(),n(),o.on("scroll resize",n),o.trigger("scroll");Math.floor(4*Math.random());particlesJS("particles",{particles:{number:{value:20,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.3,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:4,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.7,width:2},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"repulse"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0})})})}}),m=Vue.extend({template:"#musicTemplate",store:a,mixins:[i],data:function(){return{playing:!1,posts:[]}},methods:{openAlbum:function(e){var t="/music/"+e;u.push({path:t})},playAudio:function(){e(".mpcard--music").addClass("hover"),this.playing?(e(".mpaudio__player").get(0).pause(),e(".mpcard__back__inner > i").removeClass("fa-pause").addClass("fa-play-circle")):(e(".mpaudio__player").get(0).play(),e(".mpcard__back__inner > i").removeClass("fa-play-circle").addClass("fa-pause")),this.playing=!this.playing}},mounted:function(){this.$nextTick(function(){var i=this;o("Music Hall"),a.commit("loadingOn"),i.$http.get(wp.root+"wp/v2/music").then(function(o){i.posts=o.data,console.log(o.data);var s=["http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/icon-amazon.png","http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/icon-spotify.png","http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/icon-itunes.png"];i.posts.forEach(function(e){s.push(e.better_featured_image.source_url)}),i.preload(s,function(){a.commit("loadingOff"),e(".mpgal__item img").hover(function(){e(".mpgal").addClass("mpgal--hovered")},function(){e(".mpgal").removeClass("mpgal--hovered")}),e("html, body").scrollTop(0),n();var o=e(window);o.on("scroll resize",n),o.trigger("scroll"),t()})},function(e){console.log(e)})})}}),l=Vue.extend({template:"#galleryTemplate",store:a,mixins:[i],data:function(){return{loaded:!0,posts:[{title:"Earth",slug:"earth",image:"http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/gallery-1.png",content:"<p>When I get off of this mountain You know where I want to go Straight down the Mississippi River To the Gulf of Mexico </p><p> To Lake George, Louisiana Little Bessie, girl that I once knew And she told me just to come on by If there's anything she could do </p><p> Up on Cripple Creek she sends me If I spring a leak she mends me I don't have to speak she defends me A drunkard's dream if I ever did see one</p>"},{title:"Sirens",slug:"sirens",image:"http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/gallery-2.png",content:"<p>When I get off of this mountain You know where I want to go Straight down the Mississippi River To the Gulf of Mexico </p><p> To Lake George, Louisiana Little Bessie, girl that I once knew And she told me just to come on by If there's anything she could do </p><p> Up on Cripple Creek she sends me If I spring a leak she mends me I don't have to speak she defends me A drunkard's dream if I ever did see one</p>"},{title:"Autumn",slug:"autumn",image:"http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/gallery-3.png",content:"<p>When I get off of this mountain You know where I want to go Straight down the Mississippi River To the Gulf of Mexico </p><p> To Lake George, Louisiana Little Bessie, girl that I once knew And she told me just to come on by If there's anything she could do </p><p> Up on Cripple Creek she sends me If I spring a leak she mends me I don't have to speak she defends me A drunkard's dream if I ever did see one</p>"},{title:"Sky",slug:"sky",image:"http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/gallery-4.png",content:"<p>When I get off of this mountain You know where I want to go Straight down the Mississippi River To the Gulf of Mexico </p><p> To Lake George, Louisiana Little Bessie, girl that I once knew And she told me just to come on by If there's anything she could do </p><p> Up on Cripple Creek she sends me If I spring a leak she mends me I don't have to speak she defends me A drunkard's dream if I ever did see one</p>"},{title:"Winter",slug:"winter",image:"http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/gallery-5.png",content:"<p>When I get off of this mountain You know where I want to go Straight down the Mississippi River To the Gulf of Mexico </p><p> To Lake George, Louisiana Little Bessie, girl that I once knew And she told me just to come on by If there's anything she could do </p><p> Up on Cripple Creek she sends me If I spring a leak she mends me I don't have to speak she defends me A drunkard's dream if I ever did see one</p>"},{title:"Solstice",slug:"solstice",image:"http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/gallery-6.png",content:"<p>When I get off of this mountain You know where I want to go Straight down the Mississippi River To the Gulf of Mexico </p><p> To Lake George, Louisiana Little Bessie, girl that I once knew And she told me just to come on by If there's anything she could do </p><p> Up on Cripple Creek she sends me If I spring a leak she mends me I don't have to speak she defends me A drunkard's dream if I ever did see one</p>"},{title:"Obelisk",slug:"obelisk",image:"http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/gallery-7.png",content:"<p>When I get off of this mountain You know where I want to go Straight down the Mississippi River To the Gulf of Mexico </p><p> To Lake George, Louisiana Little Bessie, girl that I once knew And she told me just to come on by If there's anything she could do </p><p> Up on Cripple Creek she sends me If I spring a leak she mends me I don't have to speak she defends me A drunkard's dream if I ever did see one</p>"},{title:"Canon in D",slug:"canon-in-d",image:"http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/gallery-8.png",content:"<p>When I get off of this mountain You know where I want to go Straight down the Mississippi River To the Gulf of Mexico </p><p> To Lake George, Louisiana Little Bessie, girl that I once knew And she told me just to come on by If there's anything she could do </p><p> Up on Cripple Creek she sends me If I spring a leak she mends me I don't have to speak she defends me A drunkard's dream if I ever did see one</p>"}]}},methods:{},mounted:function(){this.$nextTick(function(){o("Eye Gallery");var i=this;a.commit("loadingOn");var s=["http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/icon-amazon.png","http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/icon-spotify.png","http://metacin.dev/wp-content/themes/metacin-wp-theme/dist/img/icon-itunes.png"];i.posts.forEach(function(e){s.push(e.image)}),i.preload(s,function(){a.commit("loadingOff"),e(".mpgal__item img").hover(function(){e(".mpgal").addClass("mpgal--hovered")},function(){e(".mpgal").removeClass("mpgal--hovered")}),e("html, body").scrollTop(0),n();var o=e(window);o.on("scroll resize",n),o.trigger("scroll"),t()})})}}),p=Vue.extend({template:"#laboratoryTemplate",store:a,mixins:[i],data:function(){return{loaded:!1}},mounted:function(){this.$nextTick(function(){o("Laboratory"),e("html, body").scrollTop(0)})}}),d=Vue.extend({template:"#eventsTemplate",store:a,mixins:[i],data:function(){return{loaded:!1}},mounted:function(){this.$nextTick(function(){o("Events"),e("html, body").scrollTop(0)})}}),r=Vue.extend({template:"#contactTemplate",store:a,mixins:[i],data:function(){return{loaded:!1}},mounted:function(){this.$nextTick(function(){o("Contact"),e("html, body").scrollTop(0)})}}),c=Vue.extend({template:"#albumTemplate",store:a,mixins:[i],data:function(){return{post:{title:"",content:"",image:"",slug:""}}},beforeDestroy:function(){e(".mpmodal").removeClass("mpmodal--active"),document.body.classList.remove("no-scroll")},methods:{closeAlbum:function(){u.push({path:"/music"}),o("Music Hall")}},mounted:function(){this.$nextTick(function(){var t=this;t.$http.get(wp.root+"wp/v2/music?slug="+t.$route.params.slug).then(function(n){t.post=n.data[0],o(t.post.title.rendered),e(".mpmodal").addClass("mpmodal--active"),document.body.classList.add("no-scroll"),e(document).keyup(function(e){27==e.keyCode&&u.push({path:"/music"})}),e(".mpmodal__exit").click(function(){console.log("exit"),t.closeAlbum()})},function(e){console.log(e)})})}}),h=Vue.extend({template:"#artTemplate",store:a,mixins:[i],data:function(){return{post:{title:"",content:"",image:"",slug:""}}},beforeDestroy:function(){e(".mpmodal").removeClass("mpmodal--active"),document.body.classList.remove("no-scroll")},methods:{closeAlbum:function(){u.push({path:"/gallery"}),o("Eye Gallery")}},mounted:function(){this.$nextTick(function(){function t(){var t=e(".mpalbum__image > img").height()+15;console.log("height",t),e(".mpalbum__progress").height(t+"px"),e(".mpalbum__progress-bar").height(t+"px");var n=e(".mpalbum__image > img").width();console.log("width",n),e(".mpalbum__progress").width(n+"px"),e(".mpalbum__player").bind("play",function(){e(".mpalbum__progress-bar").width("0%")}),e(".mpalbum__player").bind("timeupdate",function(){console.log(this.currentTime),console.log(this.duration),console.log(this.currentTime/this.duration),e(".mpalbum__progress-bar").width(this.currentTime/this.duration*100+"%")})}var n=this,i=this.$parent.posts.filter(function(e){return e.slug==n.$route.params.slug});this.post=Object.assign({},{content:i[0].content,image:i[0].image,slug:i[0].slug,title:i[0].title}),o(this.post.title),e(".mpmodal").addClass("mpmodal--active"),document.body.classList.add("no-scroll"),e(document).keyup(function(e){27==e.keyCode&&u.push({path:"/gallery"})}),e(".mpmodal__exit").click(function(){n.closeAlbum()});var a=setInterval(function(){e(".mpalbum__image > img").width()>0&&(t(),clearInterval(a))},100)})},created:function(){}}),u=new VueRouter({mode:"history",routes:[{path:"/",name:"home",component:s},{path:"/index.html",name:"home",component:s},{path:"/music",name:"music",component:m,children:[{path:":slug",component:c}]},{path:"/gallery",name:"gallery",component:l,children:[{path:":slug",component:h}]},{path:"/laboratory",name:"laboratory",component:p},{path:"/events",name:"events",component:d},{path:"/contact",name:"contact",component:r},{path:"*",redirect:"/"}]});new Vue({router:u}).$mount("#app")}(jQuery);